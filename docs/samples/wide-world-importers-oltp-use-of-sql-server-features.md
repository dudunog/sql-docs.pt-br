---
title: Uso de recursos e funcionalidades do SQL Server | Microsoft Docs
description: Saiba mais sobre os recursos e as funcionalidades do SQL Server e seu uso no banco de dados de exemplo WideWorldImporters.
ms.prod: sql
ms.prod_service: sql
ms.technology: samples
ms.custom: ''
ms.date: 01/21/2017
ms.reviewer: ''
ms.topic: conceptual
ms.assetid: 06f89721-8478-4abc-8ada-e9c73b08bf51
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 89ba727e4fd8217cfef8a73ff341d0ed0a7359a2
ms.sourcegitcommit: da88320c474c1c9124574f90d549c50ee3387b4c
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/01/2020
ms.locfileid: "85718561"
---
# <a name="use-of-sql-server-features-and-capabilities"></a>Uso de recursos e funcionalidades do SQL Server

[!INCLUDE [SQL Server Azure SQL Database](../includes/applies-to-version/sql-asdb.md)]

WideWorldImporters o uso de recursos e funcionalidades do SQL Server no banco de dados OLTP.

O WideWorldImporters foi projetado para demonstrar muitos dos principais recursos do SQL Server, incluindo os recursos mais recentes introduzidos no SQL Server 2016. A tabela a seguir lista os recursos e funcionalidades do SQL Server. Cada linha também fornece uma descrição de como os recursos são usados no WideWorldImporters.  
&nbsp;

|Recurso SQL Server ou funcionalidade|Usar em WideWorldImporters|
|:-------------------------------|:------------------------|
|Tabelas temporais|Há muitas tabelas temporais, incluindo todas as tabelas de referência de estilo de pesquisa e entidades principais, como StockItems, clientes e fornecedores. O uso de tabelas temporais permite manter o controle do histórico dessas entidades de forma conveniente.|
|Chamadas AJAX para JSON|O aplicativo frequentemente usa chamadas AJAX para consultar essas tabelas: pessoas, clientes, fornecedores e StockItems. As chamadas retornam os dados no formato JSON. Por exemplo, consulte o procedimento armazenado `Website.SearchForCustomers` .|
|Pacotes de propriedade/valor JSON|Várias tabelas têm colunas que mantêm dados JSON para estender os dados relacionais na tabela. Por exemplo, `Application.SystemParameters` tem uma coluna para configurações de aplicativo e `Application.People` tem uma coluna para registrar as preferências do usuário. Essas tabelas usam uma `nvarchar(max)` coluna para registrar os dados JSON, juntamente com uma restrição check usando a função interna `ISJSON` para garantir que os valores de coluna sejam JSON válidos.|
|RLS (segurança em nível de linha)|A Segurança em Nível de Linha (RLS) é usada para limitar o acesso à tabela Customers, com base na associação de função. Cada território de vendas tem uma função e um usuário. Para ver um limite de acesso da RLS em ação, use o script correspondente no sample-script.zip, que faz parte da [versão do exemplo](https://go.microsoft.com/fwlink/?LinkID=800630).|
|Análise operacional em tempo real|(Versão completa do banco de dados) As tabelas transacionais principais `Sales.InvoiceLines` e `Sales.OrderLines` ambas têm um índice columnstore não clusterizado para dar suporte à execução eficiente de consultas analíticas no banco de dados transacional com impacto mínimo sobre a carga de trabalho operacional. Executar transações e análises no mesmo banco de dados também é conhecido como [HTAP (processamento transacional/analítico híbrido)](https://wikipedia.org/wiki/Hybrid_Transactional/Analytical_Processing_(HTAP)). Para ver isso em ação, use o script correspondente no sample-script.zip, que faz parte da [versão do exemplo](https://go.microsoft.com/fwlink/?LinkID=800630).|
|PolyBase|Para ver esse polybase em ação, usando uma tabela externa com um conjunto de dados públicos hospedado no armazenamento de blog do Azure, use o script correspondente no sample-script.zip, que faz parte do [lançamento do exemplo](https://go.microsoft.com/fwlink/?LinkID=800630).|
|OLTP in-memory|(Versão completa do banco de dados) Os tipos de tabela são todos otimizados para memória, de modo que os TVPs (parâmetros com valor de tabela) se beneficiam da otimização de memória.<br/><br/>As duas tabelas de monitoramento `Warehouse.VehicleTemperatures` e `Warehouse.ColdRoomTemperatures` , são otimizadas para memória. A otimização de memória permite que a tabela ColdRoomTemperatures seja populada em velocidade mais alta do que uma tabela tradicional baseada em disco. A tabela VehicleTemperatures contém a carga JSON e se presta à extensão em relação aos cenários de IoT. A tabela VehicleTemperatures se presta ainda a cenários que envolvem EventHubs, Stream Analytics e Power BI.<br/><br/>O procedimento armazenado `Website.RecordColdRoomTemperatures` é compilado nativamente para melhorar ainda mais o desempenho da gravação de temperaturas da sala fria.<br/><br/>Para ver um exemplo de OLTP na memória em ação, consulte o driver de carga de trabalho de locais de veículo em workload-drivers.zip, que faz parte da [versão do exemplo](https://go.microsoft.com/fwlink/?LinkID=800630).|
|Índice columnstore clusterizado|(Versão completa do banco de dados) A tabela `Warehouse.StockItemTransactions` usa um índice columnstore clusterizado. O número de linhas nesta tabela deve crescer grande e o índice columnstore clusterizado reduz significativamente o tamanho em disco da tabela e melhora o desempenho da consulta. A modificação nessa tabela é somente inserção-não há atualização/exclusão nessa tabela na carga de trabalho online-e o índice columnstore clusterizado é bem executado para as cargas de trabalho de inserção.|
|Máscara de Dados Dinâmicos|No esquema de banco de dados, o mascaramento foi aplicado aos detalhes bancários mantidos para fornecedores na tabela `Purchasing.Suppliers` . A equipe não administrativa não terá acesso a essas informações.|
|Always Encrypted|Uma demonstração do Always Encrypted está incluída no samples.zip que pode ser baixado, que faz parte do [lançamento do exemplo](https://go.microsoft.com/fwlink/?LinkID=800630). A demonstração cria uma chave de criptografia, uma tabela que usa criptografia para dados confidenciais e um pequeno aplicativo de exemplo que insere dados na tabela.|
|Stretch Database|A `Warehouse.ColdRoomTemperatures` tabela foi implementada como uma tabela temporal e é otimizada para memória na versão completa do banco de dados de exemplo. A tabela de arquivo morto é baseada em disco e pode ser ampliada para o Azure.|
|Índices de texto completo|Os índices de texto completo melhoram as pesquisas de pessoas, clientes e StockItems. Os índices serão aplicados a consultas somente se você tiver a indexação de texto completo instalada em sua instância do SQL Server. Uma coluna computada não persistente é usada para criar os dados que são indexados com texto completo na tabela StockItems.<br/><br/>`CONCAT`é usado para concatenar os campos para criar SearchData que é indexado com texto completo.<br/>Para habilitar o uso de índices de texto completo no exemplo, execute a seguinte instrução no banco de dados:<br/><br/>`EXECUTE [Application].[Configuration_ConfigureFullTextIndexing]`<br/><br/>O procedimento criará um catálogo de texto completo padrão se ele ainda não existir e, em seguida, substituirá as exibições de pesquisa por versões de texto completo dessas exibições).<br/><br/>Observe que o uso de índices de texto completo no SQL Server requer a seleção da opção de texto completo durante a instalação. O banco de dados SQL do Azure não requer uma configuração específica para habilitar índices de texto completo.|
|Colunas computadas persistentes indexadas|Colunas computadas persistentes indexadas usadas em SupplierTransactions e CustomerTransactions.|
|Verificar restrições|Uma restrição check relativamente complexa está em `Sales.SpecialDeals` . Isso garante que um e apenas um dos DiscountAmount, DiscountPercentage e UnitPrice estejam configurados.|
|Restrições únicas|Uma construção muitos para muitos (e restrições exclusivas) é configurada para o `Warehouse.StockItemStockGroups` .|
|Partições de tabela|(Versão completa do banco de dados) As tabelas `Sales.CustomerTransactions` e `Purchasing.SupplierTransactions` são particionadas por ano usando a função de partição `PF_TransactionDate` e o esquema de partição `PS_TransactionDate` . O particionamento é usado para melhorar a capacidade de gerenciamento de tabelas grandes.|
|Processamento de lista|Um exemplo de tipo de tabela `Website.OrderIDList` é fornecido. Ele é usado por um procedimento de exemplo `Website.InvoiceCustomerOrders` . O procedimento usa as CTEs (expressões de tabela comuns), TRY/CATCH, JSON_MODIFY, XACT_ABORT, iscount, THROW e XACT_STATE para demonstrar a capacidade de processar uma lista de pedidos em vez de apenas um único pedido, para minimizar viagens de ida e volta do aplicativo para o mecanismo de banco de dados.|
|Compactação GZip|Na `Warehouse.VehicleTemperature` exibição, sua tabela contém dados de sensor completos. Mas quando esses dados têm mais de alguns meses, eles são compactados para conservar espaço. A função COMPRESS usa a compactação GZip.<br/><br/>A exibição `Website.VehicleTemperatures` usa a função DEScompactar ao recuperar dados que foram compactados anteriormente.|
|Repositório de Consultas|O Repositório de Consultas está habilitado no banco de dados. Depois de executar algumas consultas, execute as seguintes etapas:<br/><br/>1. Abra o banco de dados no Management Studio.<br/>2. Abra o nó Repositório de Consultas, que está no banco de dados.<br/>3. Abra o relatório *principais consultas de consumo de recursos*. Consulte as execuções de consulta e veja os planos para as consultas que você acabou de executar.|
|STRING_SPLIT|A coluna `DeliveryInstructions` na tabela `Sales.Invoices` tem um valor delimitado por vírgula que pode ser usado para demonstrar STRING_SPLIT.|
|Audit|SQL Server auditoria pode ser habilitada para este banco de dados de exemplo executando a seguinte instrução no banco de dados:<br/><br/>`EXECUTE [Application].[Configuration_ApplyAuditing]`<br/><br/>No banco de dados SQL do Azure, a auditoria é habilitada por meio do [portal do Azure](https://portal.azure.com/).<br/><br/>As operações de segurança que envolvem logons, funções e permissões são registradas em todos os sistemas em que a auditoria está habilitada (incluindo os sistemas de edição Standard). A auditoria é direcionada para o log do aplicativo porque está disponível em todos os sistemas e não requer permissões adicionais. Um aviso é que, para maior segurança, ele deve ser redirecionado para o log de segurança ou para um arquivo em uma pasta segura. É fornecido um link para descrever a configuração adicional necessária.<br/><br/>Para sistemas de avaliação/desenvolvedor/Enterprise Edition, o acesso a todos os dados transacionais financeiros é auditado.|
| &nbsp; | &nbsp; |
