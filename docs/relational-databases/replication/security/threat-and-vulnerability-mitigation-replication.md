---
title: Ameaça e mitigação de vulnerabilidade (Replicação) | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- attacks [SQL Server replication]
- threats [SQL Server replication security]
- security [SQL Server replication], threats
- security threats [SQL Server replication]
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
author: MashaMSFT
ms.author: mathoma
monikerRange: =azuresqldb-mi-current||>=sql-server-2016||=sqlallproducts-allversions
ms.openlocfilehash: 63788ad29dd9f3138cca65075903ab621b0f76f3
ms.sourcegitcommit: 21c14308b1531e19b95c811ed11b37b9cf696d19
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/09/2020
ms.locfileid: "86159424"
---
# <a name="threat-and-vulnerability-mitigation-replication"></a>Ameaça e mitigação de vulnerabilidade (Replicação)
[!INCLUDE[appliesto-ss-asdbmi-xxxx-xxx-md](../../../includes/applies-to-version/sql-asdbmi.md)]
  Este tópico descreve técnicas para reduzir ameaças a uma topologia de replicação.  
  
## <a name="encryption"></a>Criptografia  
 A criptografia é o processo de converter dados em um formato que não pode ser lido sem uma chave especial, de modo que somente o destinatário pode ler os dados. A replicação não criptografa dados armazenados em tabelas ou enviados por conexões de rede. Isso ocorre por design, porque a criptografia está disponível no nível de transporte com várias tecnologias, incluindo as seguintes tecnologias padrão do setor: VPN (redes virtuais privadas), protocolo TLS, anteriormente conhecido como protocolo SSL e IPSEC (Segurança de IP). Recomendamos usar um desses métodos de criptografia para as conexões entre computadores em uma topologia de replicação. Para obter mais informações, veja [Habilitar conexões criptografadas no Mecanismo de Banco de Dados &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md). Para obter informações sobre como usar VPN e TLS para replicar dados na Internet, confira [Proteger a replicação na Internet](../../../relational-databases/replication/security/securing-replication-over-the-internet.md).  
  
 Se você usar TLS para proteger as conexões entre computadores em uma topologia de replicação, especifique o valor **1** ou **2** para o parâmetro **-EncryptionLevel** de cada agente de replicação (o valor **2** é recomendado). O valor **1** especifica que é usada criptografia, mas o agente não verifica se o certificado do servidor TLS/SSL está assinado por um emissor confiável; o valor **2** especifica que o certificado é verificado. Os parâmetros de agente podem ser especificados em perfis de agente e na linha de comando. Para obter mais informações, consulte:  
  
-   [Trabalhar com perfis do Agente de Replicação](../../../relational-databases/replication/agents/work-with-replication-agent-profiles.md)  
  
-   [Exibir e modificar parâmetros do prompt de comando de agentes de replicação &#40;SQL Server Management Studio&#41;](../../../relational-databases/replication/agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   [Conceitos dos executáveis do Replication Agent](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
 A replicação tem o seguinte comportamento em relação a Chaves Mestras de banco de dados, que são usadas para criptografar dados:  
  
-   Se existir uma Chave Mestra em um banco de dados envolvido em replicação (um banco de dados de publicação, um banco de dados de assinatura ou um banco de dados de distribuição), a replicação criptografa e descriptografa as senhas dos agentes nesse banco de dados usando uma chave simétrica de banco de dados do [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] . Se forem usadas Chaves Mestras, deverá ser criada uma Chave Mestra em cada banco de dados envolvido na replicação. Para obter mais informações sobre como criar chaves mestras, consulte [CREATE MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/create-master-key-transact-sql.md).  
  
-   Replicação não replica Chaves Mestras. Caso exija a Chave Mestra no Assinante, você deverá exportá-la do banco de dados de publicação usando BACKUP MASTER KEY e, em seguida, importá-la para o banco de dados de assinatura usando RESTORE MASTER KEY. Para obter mais informações, veja [BACKUP MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/backup-master-key-transact-sql.md) e [RESTORE MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/restore-master-key-transact-sql.md).  
  
-   Se uma Chave Mestra for definida para um banco de dados de assinatura anexável, especifique a senha da Chave Mestra usando o parâmetro `@db_master_key_password` de [sp_attachsubscription &#40;Transact-SQL&#41;](../../../relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql.md). Isso permite anexar o banco de dados no Assinante.  
  
 Para obter mais informações sobre criptografia e Chaves Mestras, consulte [Encryption Hierarchy](../../../relational-databases/security/encryption/encryption-hierarchy.md).  
  
 A replicação permite que você publique dados criptografados em coluna. Para descriptografar e usar esses dados no Assinante, a chave usada para criptografar os dados no Publicador também deve estar presente no Assinante. A replicação não fornece um mecanismo seguro para transportar chaves de criptografia. Você deve recriar a chave de criptografia manualmente no Assinante. Para obter mais informações, consulte [Replicar dados em colunas criptografadas &#40;SQL Server Management Studio&#41;](../../../relational-databases/replication/security/replicate-data-in-encrypted-columns-sql-server-management-studio.md).  
  
## <a name="see-also"></a>Consulte Também  
 [Controle de Acesso e Identidade para Replicação](../../../relational-databases/replication/security/identity-and-access-control-replication.md)   
 [Exibir e modificar configurações de segurança de replicação](../../../relational-databases/replication/security/view-and-modify-replication-security-settings.md)   

  
  
