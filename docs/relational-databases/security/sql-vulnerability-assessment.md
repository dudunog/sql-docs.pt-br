---
title: Avaliação de Vulnerabilidades SQL | Microsoft Docs
description: Use a ferramenta de Avaliação de Vulnerabilidades do SQL para ajudar a descobrir, acompanhar e corrigir possíveis vulnerabilidades do banco de dados no SQL Server.
ms.custom: ''
ms.date: 11/30/2017
ms.prod: sql
ms.prod_service: security, sql-database
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- SQL Vulnerability Assessment
author: yualan
ms.author: alayu
monikerRange: =azuresqldb-current||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: 5d6d9f58dc801e00a315742812ff88166f5f6ffd
ms.sourcegitcommit: da88320c474c1c9124574f90d549c50ee3387b4c
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/01/2020
ms.locfileid: "85737035"
---
# <a name="sql-vulnerability-assessment"></a>Avaliação de Vulnerabilidades SQL

[!INCLUDE [SQL Server Azure SQL Database](../../includes/applies-to-version/sql-asdb.md)]

A Avaliação de Vulnerabilidades SQL é uma ferramenta fácil de usar que pode ajudar você a descobrir, controlar e corrigir possíveis vulnerabilidades do banco de dados. Use-a para melhorar de forma proativa a segurança do seu banco de dados.

A avaliação de vulnerabilidades tem **suporte no SQL Server 2012 e posteriores** e também pode ser executada no [Banco de Dados SQL do Azure](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment).

## <a name="vulnerability-assessment-features"></a>Recursos de Avaliação de Vulnerabilidades
A Avaliação de Vulnerabilidades (VA) do SQL é um serviço que fornece visibilidade para o seu estado de segurança e inclui etapas práticas para resolver problemas de segurança e aperfeiçoar a segurança do banco de dados. Ela pode ajudar você a:
- Atender aos requisitos de conformidade que exigem relatórios de verificação de banco de dados. 
- Atender aos padrões de privacidade de dados.
- Monitorar um ambiente de banco de dados dinâmico, onde as alterações são difíceis de rastrear.

O serviço de AV executa uma verificação diretamente no seu banco de dados. O serviço emprega uma base de conhecimento de regras que sinalizam vulnerabilidades de segurança e realçam desvios das práticas recomendadas, como configurações incorretas, excesso de permissões e dados confidenciais sem proteção. As regras se baseiam em práticas recomendadas da Microsoft e focam em problemas de segurança que apresentam os maiores riscos para seu banco de dados e seus dados valiosos. Essas regras também representam muitos dos requisitos de várias agências regulatórias para atender aos seus padrões de conformidade.

Os resultados da verificação incluem etapas práticas para resolver cada problema e fornecer scripts de correções personalizadas quando aplicável. Um relatório de avaliação pode ser personalizado para o seu ambiente, definindo uma linha de base aceitável para as configurações de permissão, configurações de recursos e configurações de banco de dados. 

## <a name="prerequisites"></a>Pré-requisitos
Este recurso só está disponível no SSMS (SQL Server Management Studio) v17.4 ou posterior. Verifique se você está usando a versão mais recente. É possível encontrar a versão mais recente [aqui](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms).

## <a name="getting-started"></a>Introdução
Para começar a executar uma Avaliação de Vulnerabilidades no seu banco de dados, siga estas etapas:
   1.   Abra o **SQL Server Management Studio**.

   2.   Conecte-se a uma instância do Mecanismo de Banco de Dados do Microsoft SQL Server ou do localhost.

   3.   Expanda os **Bancos de Dados**, clique com o botão direito do mouse em um banco de dados, aponte para **Tarefas**, selecione **Avaliação de Vulnerabilidades** e clique em **Verificar Vulnerabilidades...**

   4.   Você pode executar uma verificação que analisa se há problemas a nível de servidor digitalizando um dos bancos de dados do sistema. Expanda os **Bancos de Dados do Sistema**, clique com o botão direito do mouse em um banco de dados **mestre**, aponte para **Tarefas**, selecione **Avaliação de Vulnerabilidades** e clique em **Verificar Vulnerabilidades...**

   ![get-started](media/sql-vulnerability-assessment/1-SSMSGetStarted.png)

## <a name="tutorial"></a>Tutorial
Use as etapas a seguir para executar e gerenciar as avaliações de vulnerabilidade em seus bancos de dados.

### <a name="1-run-a-scan"></a>1. Executar uma verificação

A caixa de diálogo Verificar Vulnerabilidades permite especificar a localização onde as verificações serão salvas. Você pode deixar a localização padrão ou clique em **Procurar...** para salvar os resultados da varredura em uma localização diferente.

Quando estiver pronto para verificar, clique em **OK** para verificar seu banco de dados em busca de vulnerabilidades.

  > [!NOTE]   
  > A verificação é leve e segura. Ela leva alguns segundos para ser executada e é completamente de somente leitura. Ela não faz nenhuma alteração no banco de dados.

![salvar o arquivo de verificação](media/sql-vulnerability-assessment/2-ssmssavescanfile.png)

### <a name="2-view-the-report"></a>2. Exibir o relatório

Quando sua verificação for concluída, seu relatório de verificação é exibido automaticamente no painel SSMS principal. O relatório apresenta uma visão geral do seu estado de segurança; quantos problemas foram encontrados e suas respectivas gravidades. Os resultados incluem avisos sobre desvios das práticas recomendadas, bem como um instantâneo de suas configurações relacionadas à segurança, como funções e entidades de segurança do banco de dados e suas permissões associadas. O relatório de verificação também fornece um mapa de dados confidenciais descobertos no banco de dados e inclui recomendações dos métodos internos disponíveis para protegê-lo.

![resultados da verificação](media/sql-vulnerability-assessment/3-ssmsscanresults.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analisar os resultados e resolver problemas

Examine seus resultados e determine quais resultados no relatório são problemas de segurança verdadeiros no seu ambiente. Faça uma busca detalhada por cada resultado com falha para entender o impacto da descoberta e por que cada verificação de segurança falhou. Use as informações de correção acionáveis fornecidas pelo relatório para resolver o problema.

![detalhes de resultados](media/sql-vulnerability-assessment/4-ssmsresultdetails.png)

### <a name="4-set-your-baseline"></a>4. Defina a linha de base

Ao examinar os resultados da avaliação, marque resultados específicos como sendo uma **Linha de base** aceitável em seu ambiente. A linha de base é essencialmente uma personalização de como os resultados são registrados. Os resultados que correspondem à linha de base são considerados ao passar nas verificações posteriores. 

Depois que você tiver estabelecido seu estado de segurança de linha de base, a VA só registra os desvios da linha de base e você pode concentrar sua atenção em problemas relevantes.

![definir linha de base](media/sql-vulnerability-assessment/5-ssmssetbaseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Executar uma nova verificação para ver seu relatório de controle personalizado

Depois de concluir a configuração das **Linhas de Base da Regra**, execute uma nova verificação para exibir o relatório personalizado. A AV agora registra apenas problemas de falha apenas os problemas de segurança diferentes do estado de linha de base aprovado.

![passar por linha de base](media/sql-vulnerability-assessment/6-ssmspassperbaseline.png)

### <a name="6-open-a-previously-run-scan"></a>6. Abrir uma verificação executada anteriormente

Você pode exibir os resultados de Avaliações de Vulnerabilidade executadas anteriormente a qualquer hora abrindo uma verificação existente. Faça isso clicando com o botão direito do mouse em um banco de dados, apontando para **Tarefas**, selecionando **Avaliação de Vulnerabilidade** e clicando em **Abrir uma Verificação Existente...**  Selecione o arquivo de resultados de verificação que você gostaria de exibir e clique em **Abrir**. 

Você também pode abrir um resultado de verificação existente por meio do menu **Arquivo -> Abrir**. Selecione **Avaliação de Vulnerabilidade...** e abra o diretório **exames** para localizar o resultado de verificação que você deseja exibir.

![abrir verificação existente](media/sql-vulnerability-assessment/7-ssmsopenexistingscan.png)

A AV agora pode ser usada para monitorar se seu banco de dados mantém um nível elevado de segurança constantemente, e se suas políticas organizacionais foram atendidas. Se os relatórios de conformidade forem necessários, os relatórios da AV podem ser úteis para facilitar o processo de conformidade.

## <a name="manage-vulnerability-assessments-using-powershell"></a>Gerenciar Avaliações de Vulnerabilidade usando o PowerShell
Você pode usar os cmdlets do PowerShell para gerenciar programaticamente as avaliações de vulnerabilidade para seus servidores SQL. Os cmdlets podem ser usados para executar avaliações de maneira programática, exportar os resultados e gerenciar linhas de base.
Para começar, baixe a versão mais recente do [módulo do SqlServer PowerShell](https://www.powershellgallery.com/packages/SqlServer/) do site da Galeria do PowerShell. Você pode saber mais [aqui](https://blogs.msdn.microsoft.com/sqlsecurity/2018/07/05/powershell-cmdlets-for-managing-sql-vulnerability-assessments/).

## <a name="next-steps"></a>Próximas etapas
Saiba mais sobre a Avaliação de Vulnerabilidades do SQL usando os seguintes recursos:
- [Executar uma Avaliação de Vulnerabilidades no Banco de Dados de SQL do Azure](https://docs.microsoft.com/azure/sql-database/sql-vulnerability-assessment) 
- [Vídeo da Channel 9 demonstrando o uso da Avaliação de Vulnerabilidades](https://channel9.msdn.com/Shows/Data-Exposed/Track-and-remediate-potential-database-vulnerabilities-with-SQL-Vulnerability-Assessment)


  
